<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Default UI</title>
	<script src="object.js"></script>
	<script src="pep.min.js"></script>
</head>

<style>
	#container {
		/*border: 10px solid greenyellow;*/
		/*width: 900px;*/
		/*height: 600px;*/
        width: 2005px;
        height: 701px;
	}
</style>
<script src="/socket.io/socket.io.js"></script>
<body>
	<div id="container" touch-action="none">

		<!--<img src="bird.png" width="300" height="300" alt=""/>-->

	</div>

	<script>

        var socket;

        function messageReceived(msg) {
            console.log("messageReceived", msg);
            if (msg.data) {
                var parsedData = JSON.parse(msg.data);
                if (parsedData) {
                    var objectData = parsedData.objectData;
                    if (objectData) {
                        var dashboardIP = objectData.ip;
                        socket = io.connect('http://'+ dashboardIP +':3030');
                    }
                }
            }
        }

		window.onload = function() {

            if (window.addEventListener) {
                // For standards-compliant web browsers
                window.addEventListener("message", messageReceived, false);
            }
            else {
                window.attachEvent("message", messageReceived);
            }

//            document.querySelector('img').setAttribute('touch-action', 'none')

		    document.addEventListener('pointerdown', function(e) {
		    	console.log('dashboard object mousedown: ' + e.pageX + ", " + e.pageY);
                socket.emit('pointerdown', {pageX: e.pageX, pageY: e.pageY});
            });

            document.addEventListener('pointermove', function(e) {
                console.log('dashboard object mousemove: ' + e.pageX + ", " + e.pageY);
                socket.emit('pointermove', {pageX: e.pageX, pageY: e.pageY});
            });

            document.addEventListener('pointerup', function(e) {
                console.log('dashboard object mouseup: ' + e.pageX + ", " + e.pageY);
                socket.emit('pointerup', {pageX: e.pageX, pageY: e.pageY});
            });

		}

	</script>
</body>
</html>

